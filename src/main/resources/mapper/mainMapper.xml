<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mainSQL">
	<insert id="write" parameterType="main.bean.MainDTO">
		insert into person(name, age, photo) values(#{name}, #{age}, #{photo})
	</insert>
	
	<select id="mainList" resultType="main.bean.MainDTO">
		select * from person
	</select>
	
	<select id="product_card" resultType="main.bean.MainDTO">
		select * from product
	</select>
	
	<select id="product_detail" parameterType="String" resultType="main.bean.MainDTO">
		select * from product where seq = #{seq}
	</select>
	
	<select id ="product_list" parameterType="java.util.Map" resultType="main.bean.MainDTO">
		SELECT * FROM product WHERE title like CONCAT('%', #{word}, '%') AND category like
			CASE #{category}
				WHEN '수산물' THEN '수산물'
				WHEN '육류' THEN '육류'
				WHEN '야채' THEN '야채'
				WHEN '과일' THEN '과일'
				WHEN '욕실' THEN '욕실'
				WHEN '주방용품' THEN '주방용품'
				WHEN '면류' THEN '면류'
				WHEN '간식류' THEN '간식류'
				WHEN '건강식품' THEN '건강식품'
				WHEN '기타류' THEN '기타류'
				ELSE ''
			END ORDER BY
			CASE #{tag}
				WHEN 'new' THEN seq
				WHEN 'best' THEN sale
				WHEN 'sale' THEN sale
				WHEN 'price' THEN price
				ELSE seq
			END DESC LIMIT #{endNum} OFFSET #{startNum}
	</select>
	
	<select id="oneday_product" resultType="main.bean.MainDTO">
		select * from product ORDER BY sale desc limit 2 offset 0
	</select>
	
	<select id="product_number" resultType="String">
		select count(*) from product
	</select>
</mapper>